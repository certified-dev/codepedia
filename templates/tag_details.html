{% extends "main.html" %}

{% load static humanize %}

{% block title %}{{ tag }} questions - code{% endblock title %}

{% block content %}

 <div class="container mb-1 p-2">
   <div class="row pl-2 pr-2">
   
     <div class="col-12">
      <b>Questions tagged [{{ tag }}]</b>
      {% if tag.question_tags.count >= 1 %}
      <a class="btn btn-sm btn-primary float-right" href="{% url 'ask_question' %}" role="button">Ask Question</a>
      {% endif %}
         
     </div>

     <div class="col-12 mt-1">
        <small class="">{{ tag.description }}</small>
     </div>

   </div>
 </div> 

<div class="container mb-2">
   <small class="font-weight-bold">{{ tag.question_tags.count|intcomma }} questions</small>
</div>

{% for question in tag.question_tags.all reversed %}

   <div class="container mb-1 pt-1 pb-1 pl-2 pr-2" style="border:1px solid lightgray;">
        <div class="row">

        <div class="col-12">
          <small><b><a href="{% url 'question_detail' question.pk question.slug %}">{{ question.title }}</a></b></small>
         </div>

         <div class="col-12">
            {% for tag in question.tags.all %}
             <small><a href="{% url 'tag_question' tag.pk %}" class="badge badge-info badge-pill">{{ tag }}</a></small>
            {% endfor %}
         </div> 

        <div class="col-12">
             <small>
                <i class="fas fa-user-circle text-secondary"></i>
                {% if user.is_authenticated %}
                {% if question.asked_by == user %}
                    <a href="{% url 'user_profile' user.pk %}">{{ question.asked_by }}</a>
                {% else %}
                    <a href="javascript:void(0)">{{ question.asked_by }}</a>
                {% endif %}
                {% else %}
                  <a href="javascript:void(0)">{{ question.asked_by }}</a>
                {% endif %}
                <i class="fas fa-clock text-secondary ml-2"></i>
                <span>{{ question.posted_on|naturaltime}}</span>

                <div class="float-right">
                <span class="mr-2"><i class="fas fa-eye"  style="color: dodgerblue"></i> {{ question.views }}</span>
                <span class="mr-2"><i class="fas fa-comment-dots"></i> {{ question.answers.count|default_if_none:"0" }}</span>
                <span class="mr-2"><i class="fas fa-chart-line"></i> {{ question.points }}</span>
                </div>
             </small>
           </div>
       
        </div>
      </div>
{% empty %}
     <div class="container text-center p-4" style="border:1px solid lightgray;">
      <small><span class="font-italic font-weight-bold">no questions has been tagged yet...</span></small>
      <br>
      <a  href="{% url 'ask_question' %}" class="btn btn-sm btn-primary m-2">Add a question</a>
    </div> 
{% endfor %}

{% endblock %}


