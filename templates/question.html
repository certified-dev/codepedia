{% extends "main.html" %}

{% load static humanize %}

{% block title %}code | Questions {% endblock title %}

{% block content %}
  <div class="container mb-2">
  <div class="row">
    <div class="col-12 mb-3">
      <b>Top Questions</b> 
        <a class="btn btn-sm btn-primary float-right" href="{% url 'ask_question' %}" role="button">Ask Question</a>
    </div>
    
    </div>
  </div>
  
  {% for question in questions %}

      <div  class="container {% if not forloop.last %}border-bottom-0{% endif %} {% if forloop.last %} mb-2{% endif %} pt-1 pb-1 pl-3" style="border:1px solid lightgray;">
         <div class="row">

           <div class="col-12">
             <small><b><a href="{% url 'question_detail' question.pk question.slug %}">{{ question.title }}</a></b></small>
           </div>

           <div class="col-12">
            {% for tag in question.tags.all %}
             <small><a href="{% url 'tag_question' tag.pk %}" class="badge badge-pill">{{ tag }}</a></small>
            {% endfor %}
           </div>

           <div class="col-12">
             <small>
                <i class="fas fa-user-circle text-secondary"></i>
                {% if user.is_authenticated %}
                {% if question.asked_by == user %}
                    <a href="{% url 'user_profile' user.pk %}">{{ question.asked_by }}</a>
                {% else %}
                    <a href="javascript:void(0)">{{ question.asked_by }}</a>
                {% endif %}
                {% else %}
                  <a href="javascript:void(0)">{{ question.asked_by }}</a>
                {% endif %}
                <i class="fas fa-clock text-secondary ml-2"></i>
                <span>{{ question.posted_on|naturaltime}}</span>

                <div class="float-right text-secondary">
                <span class="mr-2"><i class="fas fa-eye {% if question.views >= 1 %} text-primary  {% endif %}"></i> {{ question.views }}</span>
                <span class="mr-2"><i class="fas fa-comment-dots {% if question.answers.count >= 1 %} text-success {% endif %}"></i> {{ question.answers.count|default_if_none:"0" }}</span>
                <span class="mr-2"><i class="fas fa-chart-line"></i> {{ question.score }}</span>
                </div>
             </small>
           </div>
        </div> 

      </div>
    {% endfor %}

    {% include "includes/pagination.html" %}

{% endblock %}